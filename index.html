<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Huy ƒê√®n Led</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>
    <style>
        /* Th√™m CSS cho th√¥ng b√°o c·∫£m ∆°n */
        .thank-you-message {
            display: none;
            text-align: center;
            background-color: #f0f0f0;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        /* CSS cho h√¨nh chu√¥ng v√† th√¥ng b√°o */
        #notificationBell {
            position: fixed;
            top: 20px;
            right: 20px;
            font-size: 24px;
            cursor: pointer;
            z-index: 1000;
            display: flex;
            align-items: center;
        }

        #notificationCount {
            background-color: #FF4500; /* M√†u ƒë·ªè s·∫´m */
            color: white;
            border-radius: 50%;
            padding: 5px 10px;
            font-size: 16px;
            margin-left: 5px;
        }

        #notificationContent {
            display: none;
            position: fixed;
            top: 60px;
            right: 20px;
            background-color: #fff;
            border: 1px solid #ddd;
            padding: 10px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            width: 200px;
            border-radius: 5px;
        }

        /* CSS cho modal y√™u c·∫ßu m·∫≠t kh·∫©u admin */
        #adminPrompt {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            overflow: auto;
        }

        #adminPrompt .modal-content {
            background-color: #fff;
            margin: 15% auto;
            padding: 20px;
            border-radius: 5px;
            width: 300px;
            max-width: 90%;
            position: relative;
        }
    </style>
</head>
<body>

<header>
    <h1>Huy ƒê√®n Led</h1>
    <p>Chuy√™n cung c·∫•p s·ªâ l·∫ª ƒë√®n led cho c·ª≠a h√†ng ƒë·∫°i l√Ω c√¥ng tr√¨nh</p>
    <p>Zalo: 0395886695</p>
</header>

<div class="container">
    <section id="about">
        <h2>V·ªÅ Ch√∫ng T√¥i</h2>
        <p>Huy ƒê√®n Led chuy√™n cung c·∫•p c√°c s·∫£n ph·∫©m ƒë√®n led ch·∫•t l∆∞·ª£ng cao cho c·ª≠a h√†ng, ƒë·∫°i l√Ω v√† c√¥ng tr√¨nh. V·ªõi kinh nghi·ªám nhi·ªÅu nƒÉm trong ng√†nh, ch√∫ng t√¥i cam k·∫øt mang ƒë·∫øn cho kh√°ch h√†ng nh·ªØng s·∫£n ph·∫©m t·ªët nh·∫•t v·ªõi gi√° c·∫£ c·∫°nh tranh.</p>
    </section>

    <section id="products">
        <h2>S·∫£n Ph·∫©m N·ªïi B·∫≠t</h2>
        <div id="productsContainer" class="product-list">
            <!-- C√°c s·∫£n ph·∫©m s·∫Ω ƒë∆∞·ª£c t·ª± ƒë·ªông th√™m v√†o ƒë√¢y b·ªüi JavaScript -->
        </div>
    </section>

    <!-- Th√™m n√∫t t·∫£i xu·ªëng ƒë∆°n h√†ng -->
    <button id="downloadButton" onclick="showAdminPrompt()">T·∫£i Xu·ªëng ƒê∆°n H√†ng</button>

    <!-- Th√¥ng b√°o c·∫£m ∆°n -->
    <div id="thankYouMessage" class="thank-you-message">
        <h2>C·∫£m ∆°n qu√Ω kh√°ch ƒë√£ ƒë·∫∑t h√†ng!</h2>
        <p>Ch√∫ng t√¥i s·∫Ω li√™n h·ªá v·ªõi qu√Ω kh√°ch trong th·ªùi gian s·ªõm nh·∫•t.</p>
    </div>
</div>

<footer>
    <p>&copy; 2024 Huy ƒê√®n Led. All Rights Reserved.</p>
</footer>

<!-- Modal HTML cho ƒë·∫∑t h√†ng -->
<div id="orderModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>ƒê·∫∑t Mua</h2>
        <form id="orderForm">
            <input type="text" id="customerName" placeholder="H·ªç t√™n" required><br><br>
            <input type="text" id="customerPhone" placeholder="S·ªë ƒëi·ªán tho·∫°i" required><br><br>
            <input type="text" id="customerAddress" placeholder="ƒê·ªãa ch·ªâ" required><br><br>
            <input type="hidden" id="productName">
            <input type="hidden" id="productPrice">
            <button type="submit" class="buy-button">ƒê·∫∑t Mua</button>
        </form>
    </div>
</div>

<!-- H√¨nh chu√¥ng th√¥ng b√°o -->
<div id="notificationBell" onclick="toggleNotification()">
    üîî <span id="notificationCount">0</span>
</div>
<div id="notificationContent">
    <h3>Th√¥ng B√°o</h3>
    <p id="notificationText"></p>
</div>

<!-- Modal y√™u c·∫ßu m·∫≠t kh·∫©u admin -->
<div id="adminPrompt">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Nh·∫≠p M·∫≠t Kh·∫©u Admin</h2>
        <input type="password" id="adminPassword" placeholder="M·∫≠t kh·∫©u admin">
        <button onclick="validateAdmin()">X√°c Nh·∫≠n</button>
    </div>
</div>

<script>
    // T·∫£i d·ªØ li·ªáu t·ª´ file JSON v√† hi·ªÉn th·ªã s·∫£n ph·∫©m
    function loadProducts() {
        fetch('data.json?v=' + new Date().getTime())
            .then(response => response.json())
            .then(data => {
                const productsContainer = document.getElementById('productsContainer');
                productsContainer.innerHTML = ''; // X√≥a n·ªôi dung c≈©

                data.products.forEach(product => {
                    const productItem = document.createElement('div');
                    productItem.className = 'product-item';
                    productItem.innerHTML = `
                        <img src="${product.image}" alt="${product.name}">
                        <h3>${product.name}</h3>
                        <p>Gi√°: ${product.price}</p>
                        <button onclick="openModal('${product.name}', '${product.price}')">ƒê·∫∑t Mua</button>
                    `;
                    productsContainer.appendChild(productItem);
                });
            })
            .catch(error => console.error('L·ªói t·∫£i d·ªØ li·ªáu:', error));
    }

    // G·ªçi h√†m ƒë·ªÉ t·∫£i s·∫£n ph·∫©m khi trang ƒë∆∞·ª£c t·∫£i
    window.onload = loadProducts;

    // M·ªü modal
    function openModal(productName, productPrice) {
        document.getElementById('orderModal').style.display = 'block';
        document.getElementById('productName').value = productName;
        document.getElementById('productPrice').value = productPrice;
    }

    // ƒê√≥ng modal
    var modal = document.getElementById('orderModal');
    var span = document.getElementsByClassName('close')[0];

    span.onclick = function() {
        modal.style.display = 'none';
    }

    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = 'none';
        }
    }

    // L∆∞u d·ªØ li·ªáu ƒë∆°n h√†ng v√†o localStorage v√† hi·ªÉn th·ªã th√¥ng b√°o c·∫£m ∆°n
    document.getElementById('orderForm').addEventListener('submit', function(event) {
        event.preventDefault();

        var orders = JSON.parse(localStorage.getItem('orders')) || [];

        var order = {
            customerName: document.getElementById('customerName').value,
            customerPhone: document.getElementById('customerPhone').value,
            customerAddress: document.getElementById('customerAddress').value,
            productName: document.getElementById('productName').value,
            productPrice: document.getElementById('productPrice').value,
            orderTime: new Date().toLocaleString('vi-VN') // Th·ªùi gian ƒë·∫∑t h√†ng
        };

        orders.push(order);
        localStorage.setItem('orders', JSON.stringify(orders));

        // ·∫®n modal v√† hi·ªÉn th·ªã th√¥ng b√°o c·∫£m ∆°n
        modal.style.display = 'none';
        document.getElementById('thankYouMessage').style.display = 'block';

        // C·∫≠p nh·∫≠t n·ªôi dung th√¥ng b√°o
        document.getElementById('notificationText').textContent = 'ƒê∆°n h√†ng m·ªõi v·ª´a ƒë∆∞·ª£c ƒë·∫∑t!';
        toggleNotification(); // Hi·ªÉn th·ªã th√¥ng b√°o
    });

    // T·∫£i d·ªØ li·ªáu ƒë∆°n h√†ng xu·ªëng d∆∞·ªõi d·∫°ng file Excel
    function downloadOrders() {
        var orders = JSON.parse(localStorage.getItem('orders')) || [];

        if (orders.length === 0) {
            alert('Kh√¥ng c√≥ ƒë∆°n h√†ng n√†o ƒë·ªÉ t·∫£i xu·ªëng.');
            return;
        }

        // ƒê·∫£m b·∫£o ti√™u ƒë·ªÅ c·ªôt ƒë√∫ng v·ªõi d·ªØ li·ªáu
        var ws = XLSX.utils.json_to_sheet(orders, {header: ["customerName", "customerPhone", "customerAddress", "productName", "productPrice", "orderTime"]});
        var wb = XLSX.utils.book_new();
        XLSX.utils.book_append_sheet(wb, ws, "Orders");
        XLSX.writeFile(wb, "orders.xlsx");
    }

    // Hi·ªÉn th·ªã modal nh·∫≠p m·∫≠t kh·∫©u admin
    function showAdminPrompt() {
        document.getElementById('adminPrompt').style.display = 'block';
    }

    // Ki·ªÉm tra m·∫≠t kh·∫©u admin v√† t·∫£i ƒë∆°n h√†ng
    function validateAdmin() {
        const password = document.getElementById('adminPassword').value;
        const correctPassword = 'admin123'; // ƒê·∫∑t m·∫≠t kh·∫©u c·ªßa b·∫°n ·ªü ƒë√¢y

        if (password === correctPassword) {
            downloadOrders();
            document.getElementById('adminPrompt').style.display = 'none';
        } else {
            alert('M·∫≠t kh·∫©u kh√¥ng ch√≠nh x√°c.');
        }
    }

    // Hi·ªÉn th·ªã v√† ·∫©n th√¥ng b√°o
    function toggleNotification() {
        var notificationContent = document.getElementById('notificationContent');
        var notificationBell = document.getElementById('notificationBell');
        
        if (notificationContent.style.display === 'none') {
            notificationContent.style.display = 'block';
            notificationBell.style.backgroundColor = '#e0e0e0'; // M√†u n·ªÅn khi hi·ªÉn th·ªã th√¥ng b√°o
        } else {
            notificationContent.style.display = 'none';
            notificationBell.style.backgroundColor = 'transparent'; // M√†u n·ªÅn khi ·∫©n th√¥ng b√°o
        }
    }

    // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng th√¥ng b√°o ch∆∞a t·∫£i xu·ªëng
    function updateNotificationCount() {
        var orders = JSON.parse(localStorage.getItem('orders')) || [];
        var notificationCount = document.getElementById('notificationCount');
        notificationCount.textContent = orders.length;
    }

    // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng th√¥ng b√°o khi t·∫£i trang
    window.onload = function() {
        loadProducts();
        updateNotificationCount();
    }
</script>

</body>
</html>
